<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="utf-8" /&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</p>
<p class="p1">&lt;title&gt;Plasma Lab Booking – Supabase&lt;/title&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- ✅ 固定 Supabase 配置 --&gt;</p>
<p class="p1">&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>window.SUPABASE_URL = "https://mbaacwnxdkeseiqybvrj.supabase.co";</p>
<p class="p1"><span class="Apple-converted-space">  </span>window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iYWFjd254ZGtlc2VpcXlidnJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwNzg5MzEsImV4cCI6MjA3MzY1NDkzMX0.vjQhoXxkSK3xTgqKh_sThN-6jIkzAcePtfkpnkt1Eq8";</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- 引入 Supabase JS SDK --&gt;</p>
<p class="p1">&lt;script src="https://unpkg.com/@supabase/supabase-js@2"&gt;&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>body { font-family: sans-serif; margin: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>h1 { color: #2b7fff; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.card { border: 1px solid #ccc; padding: 16px; margin-bottom: 20px; border-radius: 8px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>label { display: block; margin-top: 10px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>input, select, textarea { width: 100%; padding: 8px; margin-top: 4px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>button { margin-top: 12px; padding: 10px 16px; background: #2b7fff; color: white; border: none; border-radius: 6px; cursor: pointer; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>button.danger { background: #e05666; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.booking { border-bottom: 1px solid #ddd; padding: 8px 0; }</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;h1&gt;Plasma Bioengineering Lab – Device Booking&lt;/h1&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;!-- Booking Form --&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Book a Device&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label&gt;Device</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;select id="device"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;option&gt;Main Plasma system (PIII and IAPP)&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;option&gt;Horizontal plasma chamber&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;option&gt;Atmospheric plasma jet (APPJ)&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;option&gt;Wettability / Contact angle measurement (EC112)&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;option&gt;ATR-FTIR (EC112)&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;option&gt;UV-Vis (EC112)&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;option&gt;Microscope&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label&gt;Date &lt;input type="date" id="date" /&gt;&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label&gt;Start time &lt;input type="time" id="start" /&gt;&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label&gt;End time &lt;input type="time" id="end" /&gt;&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label&gt;Your name &lt;input id="name" /&gt;&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label&gt;Email &lt;input id="email" type="email" /&gt;&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label&gt;Notes &lt;textarea id="notes"&gt;&lt;/textarea&gt;&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button id="book"&gt;➕ Book now&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;!-- Upcoming Bookings --&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Upcoming Bookings&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="list"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">const supabase = window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);</p>
<p class="p2"><br></p>
<p class="p1">// 加载所有预订</p>
<p class="p1">async function loadBookings() {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const { data, error } = await supabase.from("bookings").select("*").order("date",{ascending:true}).order("start",{ascending:true});</p>
<p class="p1"><span class="Apple-converted-space">  </span>const list = document.getElementById("list");</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (error) { list.innerHTML = "❌ Error loading bookings"; return; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!data.length) { list.innerHTML = "&lt;i&gt;No bookings yet.&lt;/i&gt;"; return; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>list.innerHTML = "";</p>
<p class="p1"><span class="Apple-converted-space">  </span>data.forEach(b =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const div = document.createElement("div");</p>
<p class="p1"><span class="Apple-converted-space">    </span>div.className = "booking";</p>
<p class="p1"><span class="Apple-converted-space">    </span>div.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;b&gt;${b.device}&lt;/b&gt; – ${b.date} ${b.start}-${b.end}&lt;br/&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>${b.name} (${b.email})&lt;br/&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>${b.notes || ""}&lt;br/&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;button class="danger" onclick="deleteBooking('${b.id}')"&gt;🗑 Delete&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>list.appendChild(div);</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// 新建预订</p>
<p class="p1">document.getElementById("book").addEventListener("click", async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const booking = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>device: document.getElementById("device").value,</p>
<p class="p1"><span class="Apple-converted-space">    </span>date: document.getElementById("date").value,</p>
<p class="p1"><span class="Apple-converted-space">    </span>start: document.getElementById("start").value,</p>
<p class="p1"><span class="Apple-converted-space">    </span>end: document.getElementById("end").value,</p>
<p class="p1"><span class="Apple-converted-space">    </span>name: document.getElementById("name").value,</p>
<p class="p1"><span class="Apple-converted-space">    </span>email: document.getElementById("email").value,</p>
<p class="p1"><span class="Apple-converted-space">    </span>notes: document.getElementById("notes").value,</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!booking.device || !booking.date || !booking.start || !booking.end || !booking.name || !booking.email) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>alert("⚠️ Please fill all required fields");</p>
<p class="p1"><span class="Apple-converted-space">    </span>return;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>const { error } = await supabase.from("bookings").insert(booking);</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (error) { alert("❌ Error: " + error.message); return; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>alert("✅ Booking added!");</p>
<p class="p1"><span class="Apple-converted-space">  </span>loadBookings();</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">// 删除预订</p>
<p class="p1">async function deleteBooking(id) {</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!confirm("Delete this booking?")) return;</p>
<p class="p1"><span class="Apple-converted-space">  </span>const { error } = await supabase.from("bookings").delete().eq("id", id);</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (error) { alert("❌ Error: " + error.message); return; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>loadBookings();</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// 初始加载</p>
<p class="p1">loadBookings();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
